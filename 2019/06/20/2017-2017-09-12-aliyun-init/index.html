<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="一粒麦子|麦子的博客">
    <meta name="keyword" content="java">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        阿里云服务器环境搭建 - 一粒麦子 | 麦子的博客
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 落在地里死了，才能结出新的子粒 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/images/avatar.jpg" />
        </div>
        <div class="name">
            <i>lucas</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#系统初始化"><span class="toc-text">系统初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jdk1-8"><span class="toc-text">jdk1.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tomcat"><span class="toc-text">tomcat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#git"><span class="toc-text">git</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#阿里云code"><span class="toc-text">阿里云code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#maven"><span class="toc-text">maven</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#附录"><span class="toc-text">附录</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> 落在地里死了，才能结出新的子粒 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        阿里云服务器环境搭建
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2019-06-20 13:16:56</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#教程" title="教程">教程</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#aliyun" title="aliyun">aliyun</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#阿里云" title="阿里云">阿里云</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#运维" title="运维">运维</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p>我们遇上了云的时代，系统运维比以前任何一个时代都简单直接。</p>
<p>将自己最近阿里云服务器环境部署的步骤记录下来，分享给大家，也是自己做个记录</p>
<p>OS信息：</p>
<blockquote>
<p>Linux version 2.6.32-696.3.2.el6.x86_64 (<a href="mailto:mockbuild@c1bl.rdu2.centos.org" target="_blank" rel="noopener">mockbuild@c1bl.rdu2.centos.org</a>) (gcc version 4.4.7 20120313 (Red Hat 4.4.7-18) (GCC) ) #1 SMP Tue Jun 20 01:26:55 UTC 2017</p>
<p>LSB Version:    :base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch<br>Distributor ID:    CentOS<br>Description:    CentOS release 6.8 (Final)<br>Release:    6.8<br>Codename:    Final</p>
</blockquote>
<p>SSH客户端:Xshell5</p>
<ul>
<li>目录<ul>
<li>系统初始化</li>
<li>jdk1.8</li>
<li>tomcat (运行应用)</li>
<li>mysql(数据库)</li>
<li>git（远程checkout代码） </li>
<li>阿里云code（代码仓库管理）</li>
<li>maven(编译打包)</li>
</ul>
</li>
</ul>
<h3 id="系统初始化"><a href="#系统初始化" class="headerlink" title="系统初始化"></a>系统初始化</h3><p>远程root登录到系统，<a href="http://www.cnblogs.com/clicli/p/5943788.html" target="_blank" rel="noopener">创建用户</a>并<a href="http://blog.csdn.net/newairzhang/article/details/7715378" target="_blank" rel="noopener">赋权</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#创建用户，-m创建主目录,-p指定密码</span></span><br><span class="line"> useradd lucas -p serect -m</span><br><span class="line"><span class="comment">#添加到sudoer,该命令比vim /etc/sudoers要方便</span></span><br><span class="line">visudo</span><br><span class="line"><span class="comment">#找到   root    ALL=(ALL)       ALL 一行之后yyp，复制一行，将root改成自己的用户名，若sudoer时不需要密码怎写上前缀NOPASSWD:,注意是WD不是WORD</span></span><br><span class="line"><span class="comment">#修改完成后为</span></span><br><span class="line">	<span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">	<span class="comment">#root    ALL=(ALL)       ALL</span></span><br><span class="line">	<span class="comment">#lucas   ALL=(ALL)       NOPASSWD:ALL</span></span><br></pre></td></tr></table></figure>

<p>重新在xshell中建连接，用新建的用户lucas连接上系统，继续以下步骤</p>
<h3 id="jdk1-8"><a href="#jdk1-8" class="headerlink" title="jdk1.8"></a>jdk1.8</h3><p>下载jdk的tarball（下载见文章后附分享），使用xshell自带的上传工具(或者可以直接安装<code>sudo yum install lrzsz</code> 用rz也可以)上传到tmp目录下，我在home目录下建了以下目录<br>/home/lucas<br>├── apps<br>├── code<br>└── tmp<br><a href="http://blog.csdn.net/licongcong_0224/article/details/12756959/" target="_blank" rel="noopener">解压安装</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /user/java</span><br><span class="line">sudo cp ~/tmp/jdk-8u144-linux-x64.tar.gz .</span><br><span class="line">sudo tar -zxvf jdk-8u144-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>

<p>打开/etc/profile（vim /etc/profile）,加入如下内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/java/jdk1.8.0_144</span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib.tools.jar</span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME CLASSPATH PATH</span><br></pre></td></tr></table></figure>

<p><code>sudo source /etc/profile</code>使之立即生效</p>
<p><code>java -version</code> 检查是否生效</p>
<h3 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h3><p>下载tomcat的tarball，上传到 tmp目录之后再<a href="http://www.linuxidc.com/Linux/2015-08/122241.htm" target="_blank" rel="noopener">解压安装</a>之</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cp tmp/apache-tomcat-8.0.36.tar.gz apps/</span><br><span class="line"><span class="built_in">cd</span> apps/</span><br><span class="line">tar -zxf apache-tomcat-8.0.36.tar.gz</span><br><span class="line"><span class="comment">#直接启动</span></span><br><span class="line"><span class="built_in">cd</span> apache-tomcat-8.0.36</span><br><span class="line">./bin/catalina.sh start</span><br><span class="line"><span class="comment">#查看日志</span></span><br><span class="line">tail -f logs/catalina.out</span><br></pre></td></tr></table></figure>

<p>将需要部署的war拷贝到tomcat的webapps目录下，然后重启tomcat即可访问</p>
<p>###mysql<br><a href="http://www.linuxidc.com/Linux/2015-07/120234.htm" target="_blank" rel="noopener">参考</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 安装mysql</span><br><span class="line">sudo yum install -y mysql-server mysql mysql-deve</span><br><span class="line"># 检查安装</span><br><span class="line">rpm -qi mysql-server</span><br></pre></td></tr></table></figure>

<p>我的显示如下，安装成功</p>
<blockquote>
<p>Name        : mysql-server                 Relocations: (not relocatable)<br>Version     : 5.1.73                            Vendor: CentOS<br>Release     : 8.el6_8                       Build Date: Fri 27 Jan 2017 06:25:43 AM CST<br>Install Date: Tue 12 Sep 2017 10:46:25 AM CST      Build Host: c1bm.rdu2.centos.org<br>Group       : Applications/Databases        Source RPM: mysql-5.1.73-8.el6_8.src.rpm<br>Size        : 25884131                         License: GPLv2 with exceptions<br>Signature   : RSA/SHA1, Fri 27 Jan 2017 06:35:28 AM CST, Key ID 0946fca2c105b9de<br>Packager    : CentOS BuildSystem <a href="http://bugs.centos.org" target="_blank" rel="noopener">http://bugs.centos.org</a><br>URL         : <a href="http://www.mysql.com" target="_blank" rel="noopener">http://www.mysql.com</a><br>Summary     : The MySQL server and related files<br>Description :<br>MySQL is a multi-user, multi-threaded SQL database server. MySQL is a<br>client/server implementation consisting of a server daemon (mysqld)<br>and many different client programs and libraries. This package contains<br>the MySQL server and some accompanying files and directories.</p>
</blockquote>
<p>然后启动mysql服务，第一次启动需要一些初始化动作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line">sudo service mysqld start</span><br><span class="line"><span class="comment"># 重启服务</span></span><br><span class="line">sudo service mysqld restart</span><br><span class="line"><span class="comment">#设置root密码</span></span><br><span class="line">mysqladmin -u root password <span class="string">'&#123;您的密码&#125;'</span></span><br></pre></td></tr></table></figure>

<p>之后用root账户登入mysql，根据提示输入密码即可操作数据库了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><p>centos安装git还是很简单</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install git</span><br><span class="line"></span><br><span class="line"><span class="comment">#之后就可以git clone 了</span></span><br><span class="line">git <span class="built_in">clone</span> git@code.aliyun.com:aaa/bbb.git</span><br></pre></td></tr></table></figure>

<p>服务器上的git只用作检出代码之后再打包，并不提交。</p>
<h3 id="阿里云code"><a href="#阿里云code" class="headerlink" title="阿里云code"></a>阿里云code</h3><p>部署环境都搭建好了，总是通过war上传的方式来部署还是有点low的，自然想到了版本管理工具了。当然选择git了。第一反应是码云，不过想想阿里云估计也有相应的托管服务。果然，<a href="https://code.aliyun.com。" target="_blank" rel="noopener">https://code.aliyun.com。</a></p>
<p>git仓库的使用方式都差不多，先建立仓库，之后用ssh-keygen生成一个sshkey到 ~/.ssh/id_rsa.pub，添加到仓库之后，就可以在本地服务器上上传代码了。</p>
<p>windows安装git，可以考虑<a href="https://git-for-windows.github.io/" target="_blank" rel="noopener">msysgit</a> 或者<a href="https://tortoisegit.org/" target="_blank" rel="noopener">tortoisegit</a>，本人使用的是cygwin的变种<a href="http://babun.github.io/" target="_blank" rel="noopener">babun</a><br>以下为添加readme.md的操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git clone git@code.aliyun.com:aaa/bbb.git</span><br><span class="line">cd ssm</span><br><span class="line">touch readme.md</span><br><span class="line">vim readme.md</span><br><span class="line">git add readme.md</span><br><span class="line">git commit -m &apos;添加readme&apos;</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<p>使用类似的方式将代码上传到仓库，再去服务器上git pull下来就可以了。</p>
<h3 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h3><p>maven可以直接将代码构建成部署包，所以也是必备的。<a href="http://blog.csdn.net/clementad/article/details/46898013" target="_blank" rel="noopener">参考</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/tmp</span><br><span class="line"><span class="comment">#下载tarball</span></span><br><span class="line">wget http://mirrors.hust.edu.cn/apache/maven/maven-3/3.5.0/binaries/apache-maven-3.5.0-bin.tar.gz</span><br><span class="line"><span class="comment">#复制到/usr/local/，并解压</span></span><br><span class="line">sudo mv apache-maven-3.5.0-bin.tar.gz /usr/<span class="built_in">local</span>/</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/</span><br><span class="line">sudo tar zxf apache-maven-3.5.0-bin.tar.gz</span><br><span class="line">sudo rm apache-maven-3.5.0-bin.tar.gz</span><br></pre></td></tr></table></figure>

<p>需要配置下maven的镜像，使用墙内阿里云镜像，否则去墙外中央仓库拉包龟速。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd apache-maven-3.5.0/</span><br><span class="line">sudo vim conf/settings.xml</span><br></pre></td></tr></table></figure>

<p>找到&lt;mirrors&gt;标签,加入以下配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span>  </span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  </span><br><span class="line">       <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">       <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span>  </span><br><span class="line">       <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>         </span><br><span class="line">   <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置/etc/profile,加入maven的环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#maven</span><br><span class="line">export M2_HOME=/usr/local/apache-maven-3.5.0/</span><br><span class="line">export PATH=$PATH:$M2_HOME/bin</span><br></pre></td></tr></table></figure>

<p>退出之后</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#使配置立即生效</span><br><span class="line">source /etc/profile</span><br><span class="line">maven -version</span><br></pre></td></tr></table></figure>

<p>看到类似如下界面即表示成功。</p>
<blockquote>
<p>Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-04T03:39:06+08:00)<br>Maven home: /usr/local/apache-maven-3.5.0<br>Java version: 1.8.0_144, vendor: Oracle Corporation<br>Java home: /usr/java/jdk1.8.0_144/jre<br>Default locale: en_US, platform encoding: UTF-8<br>OS name: “linux”, version: “2.6.32-696.3.2.el6.x86_64”, arch: “amd64”, family: “unix”</p>
</blockquote>
<p>之后可以去项目目录下执行<code>mvn clean package</code>打包项目，再拷贝到tomcat目录下就可以部署了。当然第一次执行是很慢的，各种包拉一遍。</p>
<h3 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h3><p>文章中涉及到的软件：<br>链接: <a href="https://pan.baidu.com/s/1kVss1jp" target="_blank" rel="noopener">https://pan.baidu.com/s/1kVss1jp</a> 密码: tfb2</p>
<p>参考文章（感谢各位的分享）</p>
<p>创建用户 <a href="http://www.cnblogs.com/clicli/p/5943788.html" target="_blank" rel="noopener">http://www.cnblogs.com/clicli/p/5943788.html</a><br>sudoer配置 <a href="http://blog.csdn.net/newairzhang/article/details/7715378" target="_blank" rel="noopener">http://blog.csdn.net/newairzhang/article/details/7715378</a><br>安装jdk <a href="http://blog.csdn.net/licongcong_0224/article/details/12756959/" target="_blank" rel="noopener">http://blog.csdn.net/licongcong_0224/article/details/12756959/</a><br>mysql安装参考 <a href="http://www.linuxidc.com/Linux/2015-07/120234.htm" target="_blank" rel="noopener">http://www.linuxidc.com/Linux/2015-07/120234.htm</a><br>maven安装参考 <a href="http://blog.csdn.net/clementad/article/details/46898013" target="_blank" rel="noopener">http://blog.csdn.net/clementad/article/details/46898013</a></p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
